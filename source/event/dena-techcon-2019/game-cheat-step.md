# スマホゲームのチート手法とその対策
## チートされにくいゲーム
- サーバ側
    - データ
    - データ操作ロジック
- クライアント
    - データ操作依頼

## チートされやすいゲーム
- クライアント側
    - データ
    - データ操作ロジック

- 手元にあるとユーザインタラクションに優れたゲームが作れる
    - 最近多い
- バランス重要
    - 守りたい部分（データやロジック）
        - サーバ側にデータとロジックを置く
    - 動作速度が重要なもの

## 3種類のチートの手法と対策
### メモリ改ざんによるチート
- 95%以上はこれ（らしい）
- チートツール
    - iggg
    - game gardian
- 例: ボタン連打ゲーム
    1. スコアを 32 に
    2. メモリから 32 を探す
        - 多数ヒット
    3. スコアを 33 へ
        - スコアを変化させてしぼっていく
    4. メモリから 33 を探す
    - 以上を繰り返してスコアを表すメモリを特定
#### 対策
- メモリを検索させない
    - データをエンコードして保存
    - 画面上の数値は狙われやすい
    - Root 化検知
    - エミュレータ検知
        - PC上ではなくスマホでチートツールを動かす場合あり
### ファイル改ざん
- マスタデータ
    - 敵のステータス
    - 武器の攻撃力
    - バトルの一時的な途中経過ファイル
- ファイルを書き換えてアプリを再起動するだけ
    - ほとんどは暗号化されている
#### 対策
- ファイルを作らない
- ファイルを暗号化
- シンボル情報を削除 or 難読化
- 文字列リテラルを難読化
- 独自の暗号アルゴリズムを使用
    - 既存アルゴリズムだとばればれ
- コード難読化
    - ループを大量に追加
    - ダミーのプログラムを追加
- シンボル情報
    - 関数名など
- 文字列リテラル
    - ", ’ で囲まれたもの
### パケット改ざん
1. プログラムから暗号アルゴリズムと鍵を取得
2. パケット到着
3. 1 で取得したアルゴリズムでパケット複号化
4. パケット書き換え
5. 1 で取得したアルゴリズムで 4 を暗号化

## Reseach
- AES
- PacketProxy
    - オープンソース化予定
